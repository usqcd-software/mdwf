
(procedure qcd-2 ([stem "qcd"]
                  count-flops)
              ([res    pointer   "result" "struct Fermion *"]
               [U      pointer   "U"      "struct SU3 *"    ]
               [src    pointer   "source" "struct Fermion *"])
   (load qcd-half-fermion () x ([reg src]))
   (load qcd-half-fermion () v ([reg U]))
   (op qcd-addh () (z) ([reg v] [reg x]))
   (store qcd-half-fermion () ([reg res]) [reg z]))

(procedure qcd-f ([stem "qcd_ff"]
                  count-flops)
              ([res    pointer   "result" "struct Fermion *"]
               [U      pointer   "U"      "struct SU3 *"    ]
               [src    pointer   "source" "struct Fermion *"])
   (load qcd-fermion () x ([reg src]))
   (load qcd-fermion () v ([reg U]))
   (op qcd-addf () (z) ([reg v] [reg x]))
   (store qcd-fermion () ([reg res]) [reg z]))

(procedure qcd-g ([stem "qcd_gg"]
                  count-flops)
              ([res    pointer   "result" "struct Fermion *"]
               [U      pointer   "U"      "struct SU3 *"    ]
               [scale  double    "scale"  "double"          ]
               [src    pointer   "source" "struct Fermion *"])
   (load qcd-fermion () x ([reg src]))
   (load qcd-fermion () v ([reg U]))
   (op qcd-maddf () (z) ([reg scale] [reg v] [reg x]))
   (store qcd-fermion () ([reg res]) [reg z]))
